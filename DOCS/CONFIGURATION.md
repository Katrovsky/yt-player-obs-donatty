# Конфигурация YouTube Player

## Описание

Файл конфигурации `config.json` содержит все настройки для работы приложения YouTube Player. При запуске приложение загружает этот файл и применяет указанные параметры.

## Структура файла конфигурации

```json
{
  "port": 8093,
  "max_duration_minutes": 9,
  "min_views": 1000,
  "repeat_limit": 0,
  "cleanup_after_hours": 48,
  "max_queue_size": 100,
  "donation_widget_url": "https://widgets.donatty.com/donations/?ref=YOUR_WIDGET_REF&token=YOUR_WIDGET_TOKEN",
  "donation_min_amount": 50,
  "youtube_api_key": "YOUR_YOUTUBE_API_KEY_HERE",
  "fallback_playlist_url": "https://www.youtube.com/playlist?list=YOUR_PLAYLIST_ID"
}
```

## Параметры конфигурации

### Основные параметры

| Параметр | Тип | Описание | Значение по умолчанию |
| --------- | ----- | ---------- | ---------------------- |
| `port` | integer | Порт, на котором будет запущен веб-сервер | 8093 |
| `max_duration_minutes` | integer | Максимальная продолжительность видео в минутах (0 = без ограничений) | 9 |
| `min_views` | integer | Минимальное количество просмотров видео (0 = без ограничений) | 1000 |
| `repeat_limit` | integer | Ограничение на повторное воспроизведение видео (0 = без ограничений) | 0 |
| `cleanup_after_hours` | integer | Время в часах, после которого старые треки удаляются из очереди (0 = без очистки) | 48 |
| `max_queue_size` | integer | Максимальный размер очереди воспроизведения | 100 |

### Параметры донатов

| Параметр | Тип | Описание |
| --------- | ----- | ---------- |
| `donation_widget_url` | string | URL виджета донатов Donatty |
| `donation_min_amount` | integer | Минимальная сумма доната для добавления трека |
| `donation_check_interval` | integer | Интервал проверки новых донатов в секундах |

### Параметры YouTube API

| Параметр | Тип | Описание |
| --------- | ----- | ---------- |
| `youtube_api_key` | string | API ключ для доступа к YouTube Data API |
| `fallback_playlist_url` | string | URL плейлиста по умолчанию, который воспроизводится при пустой очереди |

## Подробное описание параметров

### `port`

Порт, на котором будет запущен веб-сервер приложения. По умолчанию 8093.

Пример: `8093`

### `max_duration_minutes`

Максимальная продолжительность видео в минутах. Видео с большей продолжительностью не будут добавлены в очередь. Установите 0 для снятия ограничений.

Пример: `9` (максимум 9 минут)

### `min_views`

Минимальное количество просмотров видео. Видео с меньшим количеством просмотров не будут добавлены в очередь. Установите 0 для снятия ограничений.

Пример: `1000` (минимум 1000 просмотров)

### `repeat_limit`

Ограничение на повторное воспроизведение видео. Указывает, сколько раз одно и то же видео может быть воспроизведено. Установите 0 для снятия ограничений. Сделано для того, чтобы зрители не спамили одним и тем же треком.

Пример: `3` (видео может быть воспроизведено 3 раза подряд)

### `cleanup_after_hours`

Время в часах, после которого старые треки удаляются из очереди. Установите 0 для отключения автоматической очистки.

Пример: `48` (очистка треков старше 48 часов)

### `max_queue_size`

Максимальный размер очереди воспроизведения. При достижении этого лимита новые треки не будут добавляться в очередь. Параметр помогает управлять нагрузкой на систему и предотвращает чрезмерное накопление треков в очереди.

Пример: `100` (максимум 100 треков в очереди)

### `donation_widget_url`

URL виджета донатов Donatty. Если указан, приложение будет отслеживать донаты и автоматически добавлять треки из сообщений донатов.

Пример: `"https://widgets.donatty.com/donations/?ref=YOUR_WIDGET_REF&token=YOUR_WIDGET_TOKEN"`

### `donation_min_amount`

Минимальная сумма доната в рублях для добавления трека. Донаты с меньшей суммой будут игнорироваться.

Пример: `50` (минимум 50 рублей)

### `youtube_api_key`

API ключ для доступа к YouTube Data API. Необходим для получения информации о видео (название, продолжительность, количество просмотров).

Пример: `"YOUR_YOUTUBE_API_KEY_HERE"`

### `fallback_playlist_url`

URL плейлиста по умолчанию. Будет воспроизводиться, когда очередь пуста.

Пример: `"https://www.youtube.com/playlist?list=YOUR_PLAYLIST_ID"`

## Пример файла конфигурации

```json
{
  "port": 8093,
  "max_duration_minutes": 9,
  "min_views": 1000,
  "repeat_limit": 0,
  "cleanup_after_hours": 48,
  "max_queue_size": 100,
  "donation_widget_url": "https://widgets.donatty.com/donations/?ref=YOUR_WIDGET_REF&token=YOUR_WIDGET_TOKEN",
  "donation_min_amount": 50,
  "donation_check_interval": 10,
  "youtube_api_key": "YOUR_YOUTUBE_API_KEY_HERE",
  "fallback_playlist_url": "https://www.youtube.com/playlist?list=YOUR_PLAYLIST_ID"
}
```

## Как изменить конфигурацию

1. Откройте файл `config.json` в текстовом редакторе
2. Измените нужные параметры
3. Сохраните файл

Приложение автоматически перезагрузит конфигурацию при изменении файла во время работы. При изменении параметров, связанных с YouTube API, может потребоваться перезапуск приложения для корректного применения изменений.
